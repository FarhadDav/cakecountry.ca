{{define "base"}}
<head>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,200..900;1,200..900&family=Rye&display=swap" rel="stylesheet">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home - Cake Country</title>
    <link rel="icon" type="image/x-icon" href="/static/images/logo.ico">
</head>
<body>
    <div class="announcement-bar" role="status" aria-live="polite" data-id="2025-closure-aug24-sep3">
        <div class="announcement-content">
            <span class="announcement-text"><strong>Please note: we will be closed from August 24th to September 3rd</strong></span>
        </div>
    </div>

    <div class="top-bar">
        <div class="top-bar-content">
            <div>
                <span><i class="fas fa-map-marker-alt"></i></span>
                <a href="https://www.google.com/maps?q=683+10+Street+SW,+Calgary,+AB" target="_blank" rel="noopener">
                    683 10 Street SW, Calgary, AB
                </a>
            </div>
            <div><span></span><a href="#contact_us">Contact Us</a></div>
        </div>
    </div>

    <!-- TODO: extract into separate component -->
     <header>
        <div class="header-content">
            <!-- TODO: make these 2 separate and on top of each other -->
            <div class="logo"><a href="/">Cake Country - Home Based Bakery</a></div>
            <nav>
                <ul>
                    <li><a href="/menu">Menu</a></li>
                    <li><a href="/pricing">Pricing</a></li>
                    <li><a href="/weddings">Weddings</a></li>
                    <li><a href="/instructions">Instructions</a></li>
                </ul>
            </nav>
        </div>
    </header>
    

    {{template "main" .}}

    <!-- TODO: extract into separate component -->
    <div id="contact_us">
        <div class="content">
            <h2>Contact Us</h2>
            <p>On-site ordering coming soon!</p>
            <ul>
                <li><a href="https://www.instagram.com/cakecountry_yyc" target="_blank" rel="noopener">Instagram</a></li>
                <li><a href="https://api.whatsapp.com/send?phone=15875819981" target="_blank" rel="noopener">WhatsApp</a></li>
                <li><a href="tel:+15875819981">Phone: +1 587 581 9981</a></li>
                <li><a href="mailto:cakecountryyyc@gmail.com">Email: cakecountryyyc@gmail.com</a></li>
                <li>
                    <div>
                        <span><i class="fas fa-map-marker-alt"></i></span>
                        <a href="https://www.google.com/maps?q=683+10+Street+SW,+Calgary,+AB" target="_blank" rel="noopener">
                            683 10 Street SW, Calgary, AB
                        </a>
                    </div>
                </li>  
            </ul>
            <ul> Hours:
                <li>Sunday - Monday: 11am - 5pm</a></li>
                <li>Tuesday - Friday: 11am - 8pm</li>
                <li>Saturday: Closed</li>
            </ul>
        </div>
    </div>

    <footer>
        Built by hand with <span class="heart">&hearts;</span>
    </footer>
</body>
<script>
    (function() {
        // Carousel logic (only if carousel exists on the page)
        const imgs = document.querySelectorAll('.carousel-img');
        if (imgs.length) {
            let idx = 0;
            const showImg = (i) => {
                imgs.forEach((img, j) => img.classList.toggle('active', j === i));
            };
            const nextImg = () => { idx = (idx + 1) % imgs.length; showImg(idx); };
            const prevImg = () => { idx = (idx - 1 + imgs.length) % imgs.length; showImg(idx); };

            showImg(idx);

            const prevBtn = document.querySelector('.carousel-btn.prev');
            const nextBtn = document.querySelector('.carousel-btn.next');
            const resetAutoScroll = () => { clearInterval(autoScroll); autoScroll = setInterval(nextImg, 3000); };
            if (prevBtn) prevBtn.onclick = () => { prevImg(); resetAutoScroll(); };
            if (nextBtn) nextBtn.onclick = () => { nextImg(); resetAutoScroll(); };

            let autoScroll = setInterval(nextImg, 3000);
        }

        // Dismissible announcement bar (click anywhere to hide)
        const banner = document.querySelector('.announcement-bar');
        if (banner) {
            const id = banner.dataset.id || 'default';
            const storageKey = 'announcement-hidden-' + id;
            try {
                if (localStorage.getItem(storageKey) === '1') {
                    banner.classList.add('is-hidden');
                }
            } catch (e) { /* ignore storage errors */ }

            const dismiss = function() {
                banner.classList.add('is-hidden');
                try { localStorage.setItem(storageKey, '1'); } catch (e) {}
            };
            banner.addEventListener('click', dismiss);
            banner.addEventListener('keydown', function(ev){
                if (ev.key === 'Enter' || ev.key === ' ') {
                    ev.preventDefault();
                    dismiss();
                }
            });
            banner.setAttribute('tabindex', '0');
            banner.setAttribute('role', 'button');
            banner.setAttribute('aria-label', 'Dismiss announcement');
        }
    })();
    </script>
{{end}}
